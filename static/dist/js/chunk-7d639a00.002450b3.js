(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d639a00"],{8591:function(e,t,n){"use strict";var r=n("f156"),s=n.n(r);s.a},c24f:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n("b775"),s=function(e){return Object(r["a"])({method:"post",url:"/app/v1_0/authorizations",data:e})},a=function(e){return Object(r["a"])({method:"get",url:"/app/v1_0/sms/codes/"+e})},o=function(){return Object(r["a"])({method:"get",url:"/app/v1_0/user"})},u=function(){return Object(r["a"])({method:"get",url:"/app/v1_0/user/channels"})},c=function(e){return Object(r["a"])({method:"get",url:"/app/v1_0/article/collections",params:e})}},ede4:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-nav-bar",{staticClass:"page-nav-bar",attrs:{title:"登录"}},[n("van-icon",{attrs:{slot:"left",name:"cross"},on:{click:function(t){return e.$router.push(e.$route.query.redirect||"/my")}},slot:"left"})],1),n("van-form",{ref:"formRef",on:{submit:e.onSubmit}},[n("van-field",{attrs:{name:"mobile",placeholder:"请输入手机号",rules:e.formRules.mobile,type:"number",maxlength:"11"},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}},[n("i",{staticClass:"iconfont iconshouji",attrs:{slot:"left-icon"},slot:"left-icon"})]),n("van-field",{attrs:{name:"code",placeholder:"请输入验证码",rules:e.formRules.code,type:"number",maxlength:"6"},scopedSlots:e._u([{key:"button",fn:function(){return[e.isShow?n("van-count-down",{attrs:{time:6e4,format:"ss"},on:{finish:function(t){e.isShow=!1}}}):n("van-button",{staticClass:"btn-small",attrs:{round:"",size:"small",type:"default","native-type":"button"},on:{click:e.sendNumBtn}},[e._v("发送验证码")])]},proxy:!0}]),model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}},[n("i",{staticClass:"iconyanzhengma iconfont",attrs:{slot:"left-icon"},slot:"left-icon"})]),n("div",{staticClass:"login-box-btn"},[n("van-button",{staticClass:"login-btn",attrs:{block:"",type:"info","native-type":"submit"}},[e._v(" 提交 ")])],1)],1)],1)},s=[],a=(n("96cf"),n("1da1")),o=n("c24f"),u={data:function(){return{user:{mobile:"",code:""},formRules:{mobile:[{required:!0,message:"请输入手机号"},{pattern:/^1[3|5|6|7|8|9]\d{9}$/,message:"请输入正确的手机格式"}],code:[{required:!0,message:"请输入验证码"},{pattern:/^\d{6}$/,message:"验证码为6为数字"}]},isShow:!1}},methods:{onSubmit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$toast.loading({message:"登录中...",forbidClick:!0,duration:0}),t.prev=1,t.next=4,Object(o["d"])(e.user);case 4:n=t.sent,r=n.data,e.$toast.success("登陆成功"),e.$store.commit("saveToken",r.data),e.$store.commit("removeCache","LayoutIndex"),e.$router.push(e.$route.query.redirect||"/my"),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),400===t.t0.response.status?e.$toast.fail("手机号或验证码错误"):507===t.t0.response.status?e.$toast.fail("服务器数据异常"):e.$toast.fail("登录失败，请稍后重试");case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()},sendNumBtn:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.formRef.validate("mobile");case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t["catch"](0),t.abrupt("return",console.log(t.t0));case 8:return e.isShow=!0,t.prev=9,t.next=12,Object(o["e"])(e.user.mobile);case 12:e.$toast("发送成功"),t.next=18;break;case 15:t.prev=15,t.t1=t["catch"](9),429===t.t1.response.status?e.$toast("请求次数频繁，请稍后重试"):e.$toast("发送失败，请稍后重试");case 18:case"end":return t.stop()}}),t,null,[[0,5],[9,15]])})))()}}},c=u,i=(n("8591"),n("2877")),l=Object(i["a"])(c,r,s,!1,null,"752c9274",null);t["default"]=l.exports},f156:function(e,t,n){}}]);
//# sourceMappingURL=chunk-7d639a00.002450b3.js.map