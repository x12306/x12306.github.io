{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.regexp.constructor.js","webpack:///./src/views/search/index.vue?f002","webpack:///./src/views/search/components/search-history.vue?5b02","webpack:///./src/views/search/components/search-suggest.vue?f95c","webpack:///./src/views/search/index.vue?c9d8","webpack:///./src/views/search/components/search-history.vue?cd86","webpack:///src/views/search/components/search-history.vue","webpack:///./src/views/search/components/search-history.vue?3aca","webpack:///./src/views/search/components/search-history.vue","webpack:///./src/views/search/components/search-suggest.vue?025c","webpack:///./src/api/search.js","webpack:///src/views/search/components/search-suggest.vue","webpack:///./src/views/search/components/search-suggest.vue?7f61","webpack:///./src/views/search/components/search-suggest.vue","webpack:///./src/views/search/components/search-result.vue?566d","webpack:///src/views/search/components/search-result.vue","webpack:///./src/views/search/components/search-result.vue?4990","webpack:///./src/views/search/components/search-result.vue","webpack:///src/views/search/index.vue","webpack:///./src/views/search/index.vue?2b70","webpack:///./src/views/search/index.vue"],"names":["DESCRIPTORS","global","isForced","inheritIfRequired","defineProperty","f","getOwnPropertyNames","isRegExp","getFlags","stickyHelpers","redefine","fails","setInternalState","set","setSpecies","wellKnownSymbol","MATCH","NativeRegExp","RegExp","RegExpPrototype","prototype","re1","re2","CORRECT_NEW","UNSUPPORTED_Y","FORCED","RegExpWrapper","pattern","flags","sticky","thisIsRegExp","this","patternIsRegExp","flagsAreUndefined","undefined","constructor","source","call","indexOf","replace","result","proxy","key","configurable","get","it","keys","index","length","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","onSearch","onCancel","$event","isResult","model","value","callback","$$v","expression","searchHistory","staticRenderFns","delAll","_v","isDel","_l","item","searchHisClick","directives","name","rawName","props","Array","data","methods","splice","i","$emit","component","domProps","_s","hightlight","slot","getSearchSuggestion","val","request","method","url","params","q","getSearchResult","searchText","String","suggestions","watch","handler","loadSearchSuggestion","immediate","text","reg","hightlightStr","finished","error","onLoad","loading","title","list","page","components","searchSuggest","searchResult","unshift","$router","push"],"mappings":"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","file":"js/chunk-0c2631c4.f67c1ce7.js","sourcesContent":["var DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar isRegExp = require('../internals/is-regexp');\nvar getFlags = require('../internals/regexp-flags');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar setInternalState = require('../internals/internal-state').set;\nvar setSpecies = require('../internals/set-species');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\nvar NativeRegExp = global.RegExp;\nvar RegExpPrototype = NativeRegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n\n// \"new\" should create a new object, old webkit bug\nvar CORRECT_NEW = new NativeRegExp(re1) !== re1;\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\n\nvar FORCED = DESCRIPTORS && isForced('RegExp', (!CORRECT_NEW || UNSUPPORTED_Y || fails(function () {\n  re2[MATCH] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return NativeRegExp(re1) != re1 || NativeRegExp(re2) == re2 || NativeRegExp(re1, 'i') != '/a/i';\n})));\n\n// `RegExp` constructor\n// https://tc39.github.io/ecma262/#sec-regexp-constructor\nif (FORCED) {\n  var RegExpWrapper = function RegExp(pattern, flags) {\n    var thisIsRegExp = this instanceof RegExpWrapper;\n    var patternIsRegExp = isRegExp(pattern);\n    var flagsAreUndefined = flags === undefined;\n    var sticky;\n\n    if (!thisIsRegExp && patternIsRegExp && pattern.constructor === RegExpWrapper && flagsAreUndefined) {\n      return pattern;\n    }\n\n    if (CORRECT_NEW) {\n      if (patternIsRegExp && !flagsAreUndefined) pattern = pattern.source;\n    } else if (pattern instanceof RegExpWrapper) {\n      if (flagsAreUndefined) flags = getFlags.call(pattern);\n      pattern = pattern.source;\n    }\n\n    if (UNSUPPORTED_Y) {\n      sticky = !!flags && flags.indexOf('y') > -1;\n      if (sticky) flags = flags.replace(/y/g, '');\n    }\n\n    var result = inheritIfRequired(\n      CORRECT_NEW ? new NativeRegExp(pattern, flags) : NativeRegExp(pattern, flags),\n      thisIsRegExp ? this : RegExpPrototype,\n      RegExpWrapper\n    );\n\n    if (UNSUPPORTED_Y && sticky) setInternalState(result, { sticky: sticky });\n\n    return result;\n  };\n  var proxy = function (key) {\n    key in RegExpWrapper || defineProperty(RegExpWrapper, key, {\n      configurable: true,\n      get: function () { return NativeRegExp[key]; },\n      set: function (it) { NativeRegExp[key] = it; }\n    });\n  };\n  var keys = getOwnPropertyNames(NativeRegExp);\n  var index = 0;\n  while (keys.length > index) proxy(keys[index++]);\n  RegExpPrototype.constructor = RegExpWrapper;\n  RegExpWrapper.prototype = RegExpPrototype;\n  redefine(global, 'RegExp', RegExpWrapper);\n}\n\n// https://tc39.github.io/ecma262/#sec-get-regexp-@@species\nsetSpecies('RegExp');\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=67c987a2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=67c987a2&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-history.vue?vue&type=style&index=0&id=758a3ad1&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-history.vue?vue&type=style&index=0&id=758a3ad1&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-suggest.vue?vue&type=style&index=0&id=c6abe6f2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-suggest.vue?vue&type=style&index=0&id=c6abe6f2&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-container\"},[_c('form',{staticClass:\"search-form\",attrs:{\"action\":\"/\"}},[_c('van-search',{attrs:{\"show-action\":\"\",\"background\":\"#3296fa\",\"placeholder\":\"请输入搜索关键词\"},on:{\"search\":_vm.onSearch,\"cancel\":_vm.onCancel,\"focus\":function($event){_vm.isResult=false}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1),(_vm.isResult)?_c('search-result',{attrs:{\"searchText\":_vm.value}}):(_vm.value.length===0)?_c('search-history',{attrs:{\"searchHistory\":_vm.searchHistory},on:{\"allDel\":function($event){_vm.searchHistory=[]},\"search\":_vm.onSearch}}):_c('search-suggest',{attrs:{\"searchText\":_vm.value},on:{\"search\":_vm.onSearch}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"searchHistory-container\"},[_c('van-cell',{attrs:{\"title\":\"历史记录\"}},[(_vm.isDel)?_c('div',{staticClass:\"btn\"},[_c('span',{on:{\"click\":_vm.delAll}},[_vm._v(\"全部删除\")]),_c('span',{on:{\"click\":function($event){_vm.isDel=false}}},[_vm._v(\"完成\")])]):_c('van-icon',{attrs:{\"name\":\"delete\"},on:{\"click\":function($event){_vm.isDel=true}}})],1),_vm._l((_vm.searchHistory),function(item,index){return _c('van-cell',{key:index,attrs:{\"title\":item},on:{\"click\":function($event){return _vm.searchHisClick(item)}}},[_c('van-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isDel),expression:\"isDel\"}],attrs:{\"name\":\"cross\"}})],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"searchHistory-container\">\r\n    <van-cell title=\"历史记录\">\r\n      <div v-if=\"isDel\"\r\n           class=\"btn\">\r\n        <span @click=\"delAll\">全部删除</span>\r\n        <span @click=\"isDel=false\">完成</span>\r\n      </div>\r\n      <van-icon v-else\r\n                @click=\"isDel=true\"\r\n                name=\"delete\" />\r\n    </van-cell>\r\n    <van-cell :title=\"item\"\r\n              v-for=\"(item,index) in searchHistory\"\r\n              :key=\"index\"\r\n              @click=\"searchHisClick(item)\">\r\n      <van-icon v-show=\"isDel\"\r\n                name=\"cross\" />\r\n    </van-cell>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    searchHistory: Array\r\n  },\r\n  data () {\r\n    return {\r\n      isDel: false\r\n    }\r\n  },\r\n  methods: {\r\n    searchHisClick (item) {\r\n      if (this.isDel) {\r\n        // 删除状态\r\n        const i = this.searchHistory.indexOf(item)\r\n        this.searchHistory.splice(i, 1)\r\n      } else {\r\n        // 非删除,点击进入搜索\r\n        this.$emit('search', item)\r\n      }\r\n    },\r\n    // 全部删除\r\n    delAll () {\r\n      this.$emit('allDel')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.searchHistory-container {\r\n  .btn {\r\n    span:first-child {\r\n      margin-right: 20px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-history.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-history.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-history.vue?vue&type=template&id=758a3ad1&scoped=true&\"\nimport script from \"./search-history.vue?vue&type=script&lang=js&\"\nexport * from \"./search-history.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search-history.vue?vue&type=style&index=0&id=758a3ad1&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"758a3ad1\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-box\"},_vm._l((_vm.suggestions),function(item,index){return _c('van-cell',{key:index,attrs:{\"icon\":\"search\"},on:{\"click\":function($event){return _vm.$emit('search',item)}}},[_c('div',{attrs:{\"slot\":\"title\"},domProps:{\"innerHTML\":_vm._s(_vm.hightlight(item))},slot:\"title\"})])}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\r\n\r\n// 获取搜索建议\r\nexport const getSearchSuggestion = (val) => {\r\n  return request({\r\n    method: 'get',\r\n    url: '/app/v1_0/suggestion',\r\n    params: {\r\n      q: val\r\n    }\r\n  })\r\n}\r\n\r\n// 获取搜索结果\r\nexport const getSearchResult = (params) => {\r\n  return request({\r\n    method: 'get',\r\n    url: '/app/v1_0/search',\r\n    params\r\n  })\r\n}\r\n","<template>\r\n  <div class=\"search-box\">\r\n    <van-cell icon=\"search\"\r\n              v-for=\"(item,index) in suggestions\"\r\n              :key=\"index\"\r\n              @click=\"$emit('search',item)\">\r\n      <!-- 要渲染带有css样式的文本，要用v-html -->\r\n      <div slot=\"title\"\r\n           v-html=\"hightlight(item)\"></div>\r\n    </van-cell>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSearchSuggestion } from '@/api/search'\r\nimport { debounce } from 'lodash'\r\nexport default {\r\n  props: {\r\n    searchText: String\r\n  },\r\n  data () {\r\n    return {\r\n      suggestions: []\r\n    }\r\n  },\r\n  watch: {\r\n    searchText: {\r\n      handler: debounce(function (value) {\r\n        this.loadSearchSuggestion(value)\r\n      }, 300),\r\n      immediate: true // 该回调将会在侦听开始之后被立即调用\r\n    }\r\n  },\r\n  methods: {\r\n    async loadSearchSuggestion (value) {\r\n      try {\r\n        const { data: res } = await getSearchSuggestion(value)\r\n        this.suggestions = res.data.options\r\n      } catch (err) {\r\n        this.$toast('获取数据失败，请稍后重试')\r\n      }\r\n    },\r\n    // 高亮匹配的文字\r\n    hightlight (text) {\r\n      const hightlightStr = `<span class='colorText'>${this.searchText}</span>`\r\n      // 创建动态匹配的正则表达式，使用new RegExp正则表达式的构造函数\r\n      // 参数1：动态的匹配字符串\r\n      // 参数2：匹配模式，g全局匹配，i不区分大小写\r\n      const reg = new RegExp(this.searchText, 'gi')\r\n      return text.replace(reg, hightlightStr)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.search-box {\r\n  ::v-deep .colorText {\r\n    color: red;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-suggest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-suggest.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-suggest.vue?vue&type=template&id=c6abe6f2&scoped=true&\"\nimport script from \"./search-suggest.vue?vue&type=script&lang=js&\"\nexport * from \"./search-suggest.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search-suggest.vue?vue&type=style&index=0&id=c6abe6f2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c6abe6f2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"error\":_vm.error,\"error-text\":\"请求失败，点击重新加载\"},on:{\"update:error\":function($event){_vm.error=$event},\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item,index){return _c('van-cell',{key:index,attrs:{\"title\":item.title}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { getSearchSuggestion } from '@/api/search';\r\n<template>\r\n  <div>\r\n    <van-list v-model=\"loading\"\r\n              :finished=\"finished\"\r\n              finished-text=\"没有更多了\"\r\n              :error.sync=\"error\"\r\n              error-text=\"请求失败，点击重新加载\"\r\n              @load=\"onLoad\">\r\n      <van-cell v-for=\"(item,index) in list\"\r\n                :key=\"index\"\r\n                :title=\"item.title\" />\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSearchResult } from '@/api/search'\r\nexport default {\r\n  props: {\r\n    searchText: String\r\n  },\r\n  data () {\r\n    return {\r\n      list: [],\r\n      loading: false,\r\n      finished: false,\r\n      page: 1,\r\n      error: false\r\n    }\r\n  },\r\n  methods: {\r\n    async onLoad () {\r\n      try {\r\n        // 1 请求数据\r\n        const paramsObj = {\r\n          page: this.page,\r\n          per_page: 10,\r\n          q: this.searchText\r\n        }\r\n        const { data: res } = await getSearchResult(paramsObj)\r\n        // console.log(res)\r\n        // 2 添加数据\r\n        // if (Math.random() > 0.5) {\r\n        //   JSON.parse('asdasd')\r\n        // }\r\n        this.list.push(...res.data.results)\r\n        // 3 关闭loading\r\n        this.loading = false\r\n        // 4 判断是否还有数据，没有就将finished关闭\r\n        if (res.data.results.length) {\r\n          // 有数据，加载下一页\r\n          this.page++\r\n        } else {\r\n          // 没有数据，把finished设置关闭\r\n          this.finished = true\r\n        }\r\n      } catch (err) {\r\n        this.error = true\r\n        this.loading = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-result.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-result.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-result.vue?vue&type=template&id=76a3b889&scoped=true&\"\nimport script from \"./search-result.vue?vue&type=script&lang=js&\"\nexport * from \"./search-result.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"76a3b889\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"search-container\">\r\n    <form action=\"/\"\r\n          class=\"search-form\">\r\n      <van-search v-model=\"value\"\r\n                  show-action\r\n                  background='#3296fa'\r\n                  placeholder=\"请输入搜索关键词\"\r\n                  @search=\"onSearch\"\r\n                  @cancel=\"onCancel\"\r\n                  @focus=\"isResult=false\" />\r\n    </form>\r\n    <!-- 搜索结果 -->\r\n    <search-result v-if=\"isResult\"\r\n                   :searchText='value'></search-result>\r\n    <!-- 搜索历史 -->\r\n    <search-history v-else-if=\"value.length===0\"\r\n                    :searchHistory='searchHistory'\r\n                    @allDel='searchHistory=[]'\r\n                    @search='onSearch'></search-history>\r\n    <!-- 模糊搜索 -->\r\n    <search-suggest v-else\r\n                    :searchText='value'\r\n                    @search='onSearch'></search-suggest>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport searchHistory from './components/search-history'\r\nimport searchSuggest from './components/search-suggest'\r\nimport searchResult from './components/search-result'\r\nimport { getItem, setItem } from '@/utils/storage'\r\nexport default {\r\n  data () {\r\n    return {\r\n      value: '',\r\n      isResult: false,\r\n      searchHistory: getItem('searchHistories') || [] // 存放搜索的历史记录\r\n    }\r\n  },\r\n  components: {\r\n    searchHistory,\r\n    searchSuggest,\r\n    searchResult\r\n  },\r\n  methods: {\r\n    onSearch (val) {\r\n      // console.log(val)\r\n      // 点击搜索建议时，把该搜索建议更新到输入框\r\n      this.value = val\r\n      // 在展示搜索结果之前保存该搜索记录\r\n      // 历史记录中不应有重复的，最新的记录应放在前面\r\n      const index = this.searchHistory.indexOf(val)\r\n      if (index !== -1) {\r\n        this.searchHistory.splice(index, 1)\r\n      }\r\n      this.searchHistory.unshift(val)\r\n      // 展示搜索结果\r\n      this.isResult = true\r\n    },\r\n    onCancel () {\r\n      this.$router.push('/')\r\n    }\r\n  },\r\n  watch: {\r\n    searchHistory (value) {\r\n      // console.log(value)\r\n      setItem('searchHistories', value)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.search-container {\r\n  padding-top: 108px;\r\n  .search-form {\r\n    position: fixed;\r\n    top: 0;\r\n    z-index: 1;\r\n  }\r\n  .van-search {\r\n    padding: 23px 0 17px 34px;\r\n    ::v-deep.van-search__content {\r\n      width: 589px;\r\n      height: 56px;\r\n      border: 1px solid #e8e8e8;\r\n      border-radius: 6px;\r\n      margin-right: 33px;\r\n      .van-icon {\r\n        font-size: 25px;\r\n        color: #9a9a9a;\r\n      }\r\n      .van-field__control {\r\n        font-size: 25px;\r\n        color: #333;\r\n      }\r\n    }\r\n    .van-cell {\r\n      line-height: 40px;\r\n    }\r\n    .van-search__action {\r\n      font-size: 28px;\r\n      color: #fff;\r\n      padding: 0;\r\n      margin-right: 37px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=67c987a2&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=67c987a2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"67c987a2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}